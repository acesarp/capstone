# Migration `20201208051844-prisma-migration`

This migration has been generated by Augusto at 12/7/2020, 9:18:44 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE `Activity` (
    `activityId` INT NOT NULL AUTO_INCREMENT,
    `title` VARCHAR(191) NOT NULL,
    `description` VARCHAR(191) NOT NULL,
    `location` VARCHAR(191) NOT NULL,
    `createdAt` DATETIME(3) NOT NULL DEFAULT CURRENT_TIMESTAMP(3),
    `updatedAt` DATETIME(3) NOT NULL DEFAULT CURRENT_TIMESTAMP(3),
    `eventId` INT NOT NULL,

    PRIMARY KEY (`activityId`)
) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

CREATE TABLE `Comment` (
    `commentId` INT NOT NULL AUTO_INCREMENT,
    `authorId` INT NOT NULL,
    `title` VARCHAR(191) NOT NULL,
    `text` VARCHAR(191) NOT NULL,
    `createdAt` DATETIME(3) NOT NULL DEFAULT CURRENT_TIMESTAMP(3),
    `updatedAt` DATETIME(3) NOT NULL DEFAULT CURRENT_TIMESTAMP(3),

    PRIMARY KEY (`commentId`)
) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

CREATE TABLE `Event` (
    `eventId` INT NOT NULL AUTO_INCREMENT,
    `name` VARCHAR(191) NOT NULL,
    `address` VARCHAR(191) NOT NULL,
    `description` VARCHAR(191) NOT NULL,
    `createdAt` DATETIME(3) NOT NULL DEFAULT CURRENT_TIMESTAMP(3),
    `updatedAt` DATETIME(3) NOT NULL DEFAULT CURRENT_TIMESTAMP(3),

    PRIMARY KEY (`eventId`)
) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

CREATE TABLE `Reaction` (
    `reactionId` INT NOT NULL AUTO_INCREMENT,
    `ownerId` INT NOT NULL,
    `likeDislike` BOOLEAN NOT NULL,
    `createdAt` DATETIME(3) NOT NULL DEFAULT CURRENT_TIMESTAMP(3),
    `updatedAt` DATETIME(3) NOT NULL DEFAULT CURRENT_TIMESTAMP(3),
    `commentCommentId` INT NOT NULL,

    PRIMARY KEY (`reactionId`)
) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

CREATE TABLE `User` (
    `userId` INT NOT NULL AUTO_INCREMENT,
    `username` VARCHAR(191) NOT NULL,
    `password` VARCHAR(191) NOT NULL,
    `firstName` VARCHAR(191) NOT NULL,
    `lastName` VARCHAR(191) NOT NULL,
    `dob` DATETIME(3) NOT NULL,
    `phone` VARCHAR(191),
    `email` VARCHAR(191) NOT NULL,
    `street` VARCHAR(191) NOT NULL,
    `city` VARCHAR(191) NOT NULL,
    `province_state` VARCHAR(191) NOT NULL,
    `country` VARCHAR(191) NOT NULL,
    `userFolderPath` VARCHAR(191) NOT NULL,
    `displayName` VARCHAR(191),
    `displayBirthday` DATETIME(3),
    `about` VARCHAR(191),
    `gender` VARCHAR(191),
    `avatar` VARCHAR(191),
    `createdAt` DATETIME(3) NOT NULL DEFAULT CURRENT_TIMESTAMP(3),
    `updatedAt` DATETIME(3) NOT NULL DEFAULT CURRENT_TIMESTAMP(3),
    `eventEventId` INT,
UNIQUE INDEX `User.email_unique`(`email`),

    PRIMARY KEY (`userId`)
) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

ALTER TABLE `Activity` ADD FOREIGN KEY (`eventId`) REFERENCES `Event`(`eventId`) ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE `Comment` ADD FOREIGN KEY (`authorId`) REFERENCES `User`(`userId`) ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE `Reaction` ADD FOREIGN KEY (`ownerId`) REFERENCES `User`(`userId`) ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE `Reaction` ADD FOREIGN KEY (`commentCommentId`) REFERENCES `Comment`(`commentId`) ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE `User` ADD FOREIGN KEY (`eventEventId`) REFERENCES `Event`(`eventId`) ON DELETE SET NULL ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration ..20201208051844-prism-migration
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,77 @@
+generator client {
+  provider = "prisma-client-js"
+}
+
+datasource db {
+  provider = "mysql"
+  url = "***"
+}
+
+
+model Activity {
+  activityId  Int         @id @default(autoincrement())
+  title       String
+  description String
+  location    String
+  createdAt   DateTime    @default(now())
+  updatedAt   DateTime    @default(now())
+  eventId     Int
+  event       Event       @relation(fields: [eventId], references:[eventId])
+}
+
+model Comment {
+  commentId     Int        @id @default(autoincrement())
+  authorId      Int
+  author        User       @relation(fields: [authorId], references: [userId])
+  reactions     Reaction[]
+  title         String
+  text          String
+  createdAt     DateTime   @default(now())
+  updatedAt     DateTime   @default(now())
+}
+
+model Event {
+  eventId       Int        @id @default(autoincrement())
+  name          String
+  address       String
+  description   String
+  createdAt     DateTime   @default(now())
+  updatedAt     DateTime   @default(now())
+  activities    Activity[]
+  participants  User[]
+}
+
+model Reaction {
+  reactionId  Int          @id @default(autoincrement())
+  ownerId      Int
+  owner        User       @relation(fields: [ownerId], references: [userId])
+  commentId   Comment      @relation(references: [commentId])
+  likeDislike Boolean
+  createdAt   DateTime     @default(now())
+  updatedAt   DateTime     @default(now())
+}
+
+model User {
+  userId           Int        @id @default(autoincrement())
+  username         String
+  password         String
+  firstName        String
+  lastName         String
+  dob              DateTime
+  phone            String?
+  email            String     @unique
+  street           String
+  city             String
+  province_state   String
+  country          String
+  userFolderPath   String
+  displayName      String?
+  displayBirthday  DateTime?
+  about            String?
+  gender           String?
+  avatar           String?
+  createdAt        DateTime     @default(now())
+  updatedAt        DateTime     @default(now())
+  comments         Comment[]
+  reactions        Reaction[]
+}
```


